# 빈 생명주기 콜백

### DB Connection 이나 네트워크 소켓 애플리케이션 시작 시 연결 하고 종료 시 종료하려면, 객체의 초기화와 종료 작업이 필요하다.

- BeanLifeCycleTest 파일에서 알듯 생성자를 호출 헀을 때 url 의 값을 알 수 없기에 null 반환
- DI가 되기 전에 생성 되었기에 이런 결과 추출. 따라서 DI가 완료 되고 초기화 작업을 진행해야함.
- DI가 완료 된 시점은 스프링에서 콜백 메서드를 통해 Bean 에게 알려주는 기능을 제공.

# Bean Event LifeCycle
- 1. 스프링 컨테이너 생성
- 2. 스프링 빈 생성
- 3. DI
- 4. 초기화 콜백 ( Bean 생성 + DI 완료 후 호출)
- 5. 사용
- 6. 소멸 전 콜백 ( Bean 소멸 직전 호출)
- 7. 종료

## 객체의 생성 과 초기화를 분리하자.
생성자는 파라미터를 받고 객체를 생성하지만 초기화는 생성된 값을 이용해 외부 커넥션등 무거운 동작을 진행함. <br>
따라서 생성자에서 무거운 작업을 하는 것 보다 분리하여 진행하는것이 유지보수 관점에서 좋다.

## 스프링 지원 Bean 생명주기 콜백
- 인터페이스 (initializing Bean, DisposableBean)
  - 단점: 스프링 전용 인터페이스이다. 이름을 변경할 수 없다. 코드를 고칠 수 없는 외부 라이브러리에 적용 불가능. 나온지 오래되서 지금은 안씀.
- 설정 정보에 초기화 메서드, 종료 메서드 지정
  - @Bean(initMethod = "init", destroyMethod="close")
  - 메서드 이름이 자유로움. 스프링 코드에 의존X. 설정 정보를 쓰는거기에 외부 라이브러리에도 초기화 종료 메서드에 적용 가능.
  - destroyMethod 명은 보통 close,shutdown 을 많이 쓰는데 default 가 inferred(추론)으로 되어있다, 이 기능은 close,shutdown 이라는 메서드가 있으면 자동 호출함.
  - 추론 쓰기 싫으면 destroyMethod="" 형태로 작성
- @PostConstruct, @PreDestroy 애노테이션
  - 가장 추천하는 방법
  - javax 패키지 이기 때문에 Java 에서 지원한다
  - 단점으로 외부 라이브러리에 적용할 수 없다. 
  - 컴포넌트 스캔과 잘 어울린다.
